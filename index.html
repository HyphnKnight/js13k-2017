<html><head><meta charset="UTF-8">
  <style>
    html,
    body,
    canvas {
      padding: 0;
      margin: 0;
      text-align: center;
      background-color: black;
      image-rendering: pixelated;
    }

    canvas {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    @media (orientation: landscape) {
      canvas {
        height: 100vh;
        max-width: 100vw;
        width: auto;
      }
    }

    @media (orientation: portrait) {
      canvas {
        height: auto;
        width: 100vw;
        max-height: 100vhs;
        position: relative;
        top: calc(50vh - 100vw / 160 * 192 / 2);
      }
    }
  </style>
</head>

<body>
  <canvas></canvas>
  <script>(function(){'use strict';function a(a,b=8){const c=j(10,b);return Math.round(a*c)/c}function b(b,d){const e=h(d),f=g(d);return[a(b[0]*f-b[1]*e),a(b[0]*e+b[1]*f)]}var c=Math.max,d=Math.min,e=Math.floor,f=Math.abs,g=Math.cos,h=Math.sin,j=Math.pow;const k=(...a)=>{let b=0;for(let c=a.length-1;0<=c;--c)b+=a[c];return b},l=(a)=>0<a?1:0>a?-1:0,m=(a)=>a*a,n=(a,b)=>(a[0]+=b[0],a[1]+=b[1],a),o=(a,b)=>[a[0]-b[0],a[1]-b[1]],p=(a,b)=>(a[0]-=b[0],a[1]-=b[1],a),q=(a)=>m(a[0])+m(a[1]),r=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d+=2){const[e,f]=b([a[d],a[d+1]]);c[d]=e,c[d+1]=f}return c},s=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d+=2)c[d]=a[d]+b[0],c[d+1]=a[d+1]+b[1];return c},u=(a,b)=>{for(let c=0,d=a.length;c<d;c+=2)a[c]+=b[0],a[c+1]+=b[1];return a},v=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d+=2)c[d]=a[d]-b[0],c[d+1]=a[d+1]-b[1];return c},w=(b,d)=>{const e=[],f=h(d),j=g(d);for(let c=0,g=b.length;c<g;c+=2)e[c]=a(b[c]*j-b[c+1]*f),e[c+1]=a(b[c]*f+b[c+1]*j);return e},x=(a,b,c)=>s(w(v(a,b),c),b),y=()=>Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9),z=(a,b)=>[-a/2,+b/2,-a/2,-b/2,+a/2,-b/2,+a/2,+b/2],A=(a,b=0,c=1,d=1,e=``)=>({id:y(),shape:`Rectangle`,label:e,position:a,rotation:b,width:c,height:d,points:z(c,d)}),B=document.querySelector(`canvas`),C=B.getContext(`2d`),D=320,E=240;let F=B.offsetWidth,G=B.offsetHeight,H=1,I=1;B.width=D,B.height=E;const J=()=>{const{top:a,left:b,width:c,height:d}=B.getBoundingClientRect();F=b,G=a,H=D/c,I=E/d};J(),window.addEventListener(`resize`,J);const K=[0,0],L=(b)=>(c)=>b.translate(a(c[0],0),a(c[1],0)),M=(a)=>(b)=>a.rotate(b),N=(b)=>(c,d,e)=>b.clearRect(a(c[0],0),a(c[1],0),a(d,0),a(e,0)),O=(a,b)=>()=>N(a)(K,b.width,b.height),P=(b)=>(c)=>b.moveTo(a(c[0],0),a(c[1],0)),Q=(b)=>(c)=>b.lineTo(a(c[0],0),a(c[1],0)),R=(b)=>(c,d)=>b.quadraticCurveTo(a(d[0],0),a(d[1],0),a(c[0],0),a(c[1],0)),S=(b)=>(c,d,e,f,g)=>b.arc(a(c[0],0),a(c[1],0),d,e,f,g),T=(b)=>(c,d,e)=>b.rect(a(c[0],0),a(c[1],0),a(d,0),a(e,0)),U=(b)=>(c)=>(d,e,f)=>b.drawImage(c,a(d[0],0),a(d[1],0),e,f),V=(b)=>(c)=>(d,e,f,g,h,i)=>b.drawImage(c,a(e[0],0),a(e[1],0),f,g,a(d[0],0),a(d[1],0),h,i),W=(a)=>(b,c=0)=>{const d=[b[0],b[1]],e=v(b,d);a.save(),L(a)(d),M(a)(c),P(a)([0,0]);for(let d=0;d<e.length;d+=2)Q(a)([e[d],e[d+1]]);a.restore()},X=(a)=>(b,c,d=0)=>{a.save(),L(a)(b),M(a)(d),P(a)([c[c.length-2],c[c.length-1]]);for(let e=0;e<c.length;e+=2)Q(a)([c[e],c[e+1]]);a.restore()},Y=(b)=>(c,d,e,f=0)=>{b.save(),L(b)(c),M(b)(f),T(b)([-d/2,-e/2],a(d,0),a(e,0)),b.restore()},Z=(a)=>(b,c,d=100,e=0,f=2*Math.PI,g=!1)=>{a.save(),L(a)(b),M(a)(c),S(a)([0,0],d,e,f,g),a.restore()},$=(a)=>(b)=>(c,...d)=>{b.save(),b.beginPath(),b.fillStyle=c,a(b)(...d),b.fill(),b.restore()},_=(a)=>(b)=>(c,...d)=>{b.save(),b.beginPath(),b.strokeStyle=c,a(b)(...d),b.stroke(),b.restore()},aa=$(X),ba=$(Y),ca=$(W),da=$(Z),ea=_(X),fa=_(Y),ga=_(W),ha=_(Z),ia=(b)=>(c,d,e)=>{b.save(),b.strokeStyle=c.style||'',b.font=c.font||b.font,b.textAlign=c.textAlign||b.textAlign,b.textBaseline=c.textBaseline||b.textBaseline,b.strokeText(e,a(d[0],0),a(d[1],0),c.maxWidth),b.restore()},ja=(b)=>(c,d,e)=>{b.save(),b.fillStyle=c.style||'',b.font=c.font||b.font,b.textAlign=c.textAlign||b.textAlign,b.textBaseline=c.textBaseline||b.textBaseline,b.fillText(e,a(d[0],0),a(d[1],0),c.maxWidth),b.restore()},ka=(a)=>({ctx:a,canvas:a.canvas,translate:L(a),rotate:M(a),moveTo:P(a),lineTo:Q(a),quadraticCurveTo:R(a),arc:S(a),drawLine:W(a),drawPolygon:X(a),drawArc:Z(a),drawImage:U(a),drawSlicedImage:V(a),fillRectangle:ba(a),fillPolygon:aa(a),fillLine:ca(a),fillArc:da(a),fillText:ja(a),strokePolygon:ea(a),strokeRectangle:fa(a),strokeLine:ga(a),strokeArc:ha(a),strokeText:ia(a),clearRect:N(a),clear:O(a,a.canvas)});class la{constructor(){this.position=K,this.rotation=0,this.saved_positions=[],this.saved_rotations=[]}apply(a){const b=[this.position[0],this.position[1]],c=this.rotation;return Object.assign(Object.create(null),a,{id:y(),position:b,rotation:c})}save(){this.saved_positions.push([this.position[0],this.position[1]]),this.saved_rotations.push(this.rotation)}restore(){if(0<this.saved_positions.length){const a=this.saved_positions.pop();!a||(this.position[0]=a[0],this.position[1]=a[1]);const b=this.saved_rotations.pop();!b&&0!==b||(this.rotation=b)}}}const ma=(a,b)=>l((b[2]-b[0])*(a[1]-b[1])-(b[3]-b[1])*(a[0]-b[0])),na=(a,b,c)=>q(o(a,b))<=m(c),oa=(a,b,c,d)=>f(a[0]-b[0])<=c/2&&f(a[1]-b[1])<=d/2,pa=(a,b)=>{const c=e(b.length/2);for(let d=0;d<c;d+=2){const e=d==c-1?0:d+1;if(-1===ma(a,[b[d],b[d+1],b[e],b[e+1]]))return!0}return!1},qa=(a,b,e,f,g)=>oa(a,e,f,g)||na(e,a,b)||m(a[0]-c(e[0],d(a[0],e[0]+f)))+m(a[1]-c(e[1],d(a[1],e[1]+g)))<m(b),ra=(a,b,c,d,e,g)=>!(f(d[0]-a[0])>b/2+e/2||f(d[1]-a[1])>c/2+g/2),sa=(a,b,d,e)=>{if(pa(a,e)||pa(d,b))return!0;const f=c(b.length,e.length);for(let c=0;c<f;c+=2)if(c<b.length&&pa([b[c],b[c+1]],e)||c<e.length&&pa([e[c],e[c+1]],b))return!0;return!1},ta=new Map,ua=new Map,va=new Map,wa=A([0,0],0,window.innerWidth,window.innerHeight,`window`);window.onresize=()=>Object.assign(wa,A([0,0],0,window.innerWidth,window.innerHeight,`window`));const xa=((a=wa)=>(b)=>{const{geometry:c={shape:null}}=b;switch(c.shape){case`Circle`:return qa(c.position,c.radius,a.position,a.width,a.height);case`Rectangle`:return ra(c.position,c.width,c.height,a.position,a.width,a.height);case`Polygon`:return sa(c.position,u(x(c.points,[0,0],c.rotation),c.position),a.position,u(x(a.points,[0,0],a.rotation),a.position));default:return!0;}})(wa),ya=(a,c)=>(d)=>{const{geometry:e,children:f,render:g,interact:h}=d,{ctx:i,translate:j,rotate:k}=c;i.save(),a.save(),e&&(j(e.position),n(a.position,b(e.position,a.rotation)),k(e.rotation),a.rotation+=e.rotation),i.save(),g&&(!e||xa(a.apply(e)))&&g(c,d),i.restore(),f&&f.forEach(ya(a,c)),h&&(h.onMouseDown?ta.set(d,[d,e&&a.apply(e),h.onMouseDown]):ta.delete(d),h.onMouseMove?ua.set(d,[d,e&&a.apply(e),h.onMouseMove]):ua.delete(d),h.onMouseUp?va.set(d,[d,e&&a.apply(e),h.onMouseUp]):va.delete(d)),i.restore(),a.restore()},za=`ontouchstart`in window,Aa=(a)=>{if(a.clientX)return[a.clientX,a.clientY];else{const b=a.touches[0];return[b.clientX,b.clientY]}},Ba=(a)=>(b)=>{switch(b.shape){case`Circle`:return na(a,b.position,b.radius);case`Rectangle`:return oa(a,b.position,b.width,b.height);case`Polygon`:return pa(a,u(x(b.points,[0,0],b.rotation),b.position));default:return!1;}},Ca=(a)=>(b)=>{if(a.size){const c=p(Aa(b),[F,G]);c[0]*=H,c[1]*=I;const d=Ba(c);[...a.values()].filter(([a,b])=>!b||d(b)).forEach(([a,b,d])=>d(a,c))}},Da=`#fff`,Ea=`Arial Black, Gadget, sans-serif`,Fa=`"Lucida Console", Monaco, monospace`,Ga=`24px ${Ea}`,Ha=`12px ${Fa}`,Ia={38:`up`,40:`down`,37:`left`,39:`right`,81:`q`,87:`w`,69:`e`,65:`a`,83:`s`,68:`d`,48:`0`,49:`1`,50:`2`,51:`3`,52:`4`,53:`5`,54:`6`,55:`7`,56:`8`,57:`9`,189:`-`,187:`=`,32:`space`,13:`return`,16:`shift`,17:`ctrl`,9:`tab`,18:`alt`},Ja={up:!1,down:!1,left:!1,right:!1,q:!1,w:!1,e:!1,a:!1,s:!1,d:!1,0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,"-":!1,"=":!1,space:!1,return:!1,shift:!1,ctrl:!1,tab:!1,alt:!1,click:!1},Ka=(a,b=!0)=>{const c=Ia[a];return c&&(Ja[c]=b),Ja[c]};document.body.onkeyup=({keyCode:a})=>Ka(a,!1),document.body.onkeydown=({keyCode:a})=>Ka(a,!0);let La=0;const Ma=(a,b,c)=>({geometry:A(c,0,140,14),render:(a,c)=>{const{fillRectangle:d,fillText:e,ctx:f}=a;f.font=Ha;const{width:g}=f.measureText(b);c.geometry.width=g+10,c.geometry.points=z(c.geometry.width,c.geometry.height),e({textBaseline:`middle`,font:Ha,style:Da},[-g/2,0],b)},interact:{onMouseMove:()=>La=a,onMouseDown:()=>La=a}}),Na={geometry:A([D/2,E/2],0,140,40),children:[Ma(0,`new game`,[0,48]),Ma(1,`continue game`,[0,72])],render:(a)=>{const{fillText:b,fillPolygon:c}=a;b({textBaseline:`middle`,style:Da,font:Ga},[-59,0],`A L T E R`),400<Date.now()%600&&c(`white`,0===La?[-42,48]:[-60,72],[-5,3,5,0,-5,-3]),(Ja.up||Ja.w)&&(La=0),(Ja.down||Ja.s)&&(La=1)}},Oa={dialog:[['Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris mattis purus sed luctus dignissim. Phasellus hendrerit quam et urna tempor, eu porttitor dui feugiat. Praesent vestibulum est lectus, et vehicula velit laoreet non.']]};let Pa=!1,Qa=null;const Ra=2,Sa=D-Ra,Ta=E/4,Ua=`#fff`,Va=`#00f`,Wa=12,Xa=1.2*Wa,Ya=Sa-4*Ra,Za=Ta-4*Ra,$a=`#fff`,_a=(a,b,c)=>{const d=[];b=b.toUpperCase(),a.textBaseline=`top`,a.font=`${Wa}px monospace`;const e=b.split(` `);let f=``,g=0,h=0;for(const[i,j]of e.entries()){const b=`${f+j} `,e=a.measureText(b),k=e.width;if(h+b.length>c)return d.push([-Ya/2,-Za/2+g,b.substr(0,c-h)]),d;k>Ya&&0<i?(d.push([-Ya/2,-Za/2+g,f]),h+=f.length,f=`${j} `,g+=Xa):f=b}return d.push([-Ya/2,-Za/2+g,f]),d},ab={geometry:A([D/2,E-Ta/2],0,Sa,Ta),render:(a,{geometry:b})=>{const{dialog:c}=Oa;if(!c.length)return;Qa||(Qa=Date.now());const{ctx:d,fillRectangle:f,strokeRectangle:g,fillText:h}=a;f(Va,[0,0],b.width,b.height),g(Ua,[0,0],b.width,b.height);const[i,j]=c[0],k=_a(d,i,e((Date.now()-Qa)/300));let l=0;if(j){const[a,b]=j,{width:c}=d.measureText(b),e=c+16+4*Ra,i=-Sa/2+c,k=-Ta/2-2*Ra;f(Va,[i,k],e,Xa+4*Ra),g(Ua,[i,k],e,Xa+4*Ra),d.font=`${Wa}px monospace`,h({style:$a},[i-6+4*Ra-e/2,k-Xa/2],a),h({style:$a},[i-6+4*Ra-e/2+16,k-Xa/2],b),l=Xa/2}k.forEach(([a,b,c])=>{h({style:$a},[a,b+l],c)}),Ja.space&&!Pa?(Qa=null,Oa.dialog.shift(),Pa=!0):!Ja.space&&Pa&&(Pa=!1)},interact:{onMouseDown:()=>{Qa=null,Oa.dialog.shift()}}},{palette:bb,render:cb}=((a,b)=>{const c=ka(a.getContext(`2d`));return c.clear(),a.addEventListener(za?`ontouchstart`:`mousedown`,Ca(ta)),a.addEventListener(za?`ontouchmove`:`mousemove`,Ca(ua)),a.addEventListener(za?`ontouchend`:`mouseup`,Ca(va)),{palette:c,render:()=>ya(new la,c)(b)}})(B,{geometry:A([0,0],0,window.innerWidth,window.innerHeight),children:[ab]});bb.ctx.imageSmoothingEnabled=!1;const db=([a,b,c])=>([d,e])=>[d+e*(a-d)/(e+b)-a+D/2,E-(0===b+e?0:c*e/(b+e)),Math.sqrt(j(b+e,2)+j(a-d,2))],eb=`\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFA4`,fb=`\uD83C\uDF32`,gb=`\uD83C\uDF33`,hb=`\u2601\uFE0F`,ib=(a)=>([b,c],d=0)=>[b,c,d,a],jb=ib(fb),kb=ib(gb),lb=ib(hb);let mb=0,nb=0;const t=A([0,800],0,1e4,1600),ob=A([0,0],0,2*D,2*E),{fillText:pb,fillPolygon:qb,strokePolygon:rb,fillArc:sb}=bb,tb=()=>Date.now()%6e3/20-150,ub=()=>120,vb=()=>Date.now()%6e3/30-20,wb=()=>[tb(),ub(),vb()],xb=bb.ctx.createLinearGradient(0,0,200,200);xb.addColorStop(0,`#5E8C6A`),xb.addColorStop(1,`#BFB35A`);const yb=bb.ctx.createLinearGradient(0,0,200,200);yb.addColorStop(0,`#69D2E7`),yb.addColorStop(1,`#A7DBD8`);const zb=[];let Ab=1e3;for(;0<--Ab;)zb.push((0.5<Math.random()?jb:kb)([5120*Math.random()-2560,1280*Math.random()],0));for(Ab=25;0<--Ab;)zb.push(lb([1e4*Math.random()-5e3,1e3*Math.random()+3500],30*Math.random()+10));requestAnimationFrame(function a(){mb=d(16,Date.now()-nb),bb.clear();const b=db(wb());qb(yb,[0,0],ob.points),qb(xb,[0,0],r(s(t.points,t.position),b)),[...zb].map((a)=>[...b(a),a[2],a[3],a[4]]).sort((c,a)=>a[2]-c[2]).forEach(([a,b,c,d,e])=>pb({},[a,b-d],e)),pb({font:`16px`},b([20,20]),eb),cb(),nb=Date.now(),requestAnimationFrame(a)})})();</script>



</body></html>
(function(){'use strict';function a(a,b){for(let c=-1;++c<a.length;)b(a[c],c,a);return a}function b(a,b,c){for(let d=-1;++d<a.length;)c=b(c,a[d],d,a);return c}function c(a,b=1){const c=[];for(let d=0;d<b&&d<a.length;)c.push(a[d++]);return c}function d(a,b=8){const c=o(10,b);return Math.round(a*c)/c}function e(a,b){const e=m(b),f=l(b);return[d(a[0]*f-a[1]*e),d(a[0]*e+a[1]*f)]}async function f(a,b){if(``===a)return await Pa(0.75*(1e3*b));const c=Oa.createOscillator(),d=Oa.createGain();d.gain.value=1.1-k(1,(Date.now()-Qa)/3e3),c.connect(d),c.type=`square`,c.frequency.value=a,d.connect(Oa.destination),c.start(0),d.gain.exponentialRampToValueAtTime(1e-5,Oa.currentTime+b),await Pa(0.75*(1e3*b))}async function g(a){Ra=!1;for(let b=-1,c=-1;!Ra&&++b<a.length;){const[d,e]=a[b];if(Array.isArray(d)){for(;++c<d.length-1;)f(d[c],Array.isArray(e)?e[c]:e);f(d[c],Array.isArray(e)?e[c]:e),await Pa(0.75*(1e3*(Array.isArray(e)?k(...e):e))),c=-1}else await f(d,e)}return await!0}var h=Math.max,j=Math.abs,k=Math.min,l=Math.cos,m=Math.sin,n=Math.sqrt,o=Math.pow;const p=(a,c=(a)=>!!a)=>b(a,(a,b,d,e)=>c(b,d,e)?r(a,b):a,[]),q=(a)=>a.slice(0),r=(a,b,c=0)=>q(a).splice(c,0,b),s=(a)=>0<a?1:0>a?-1:0,u=(a)=>a*a,v=(a=(a)=>!!a)=>(b)=>a(b),w=v((a)=>null===a),x=v((a)=>'undefined'==typeof a),y=v((a)=>w(a)||x(a)),z=v((a)=>'string'==typeof a),A=v((a)=>'number'==typeof a),B=v((a)=>'boolean'==typeof a),C=v((a)=>'[object Date]'===Object.prototype.toString.call(a)),D=v((a)=>'[object Date]'===Object.prototype.toString.call(a)),E=v((a)=>Array.isArray(a)),F=v((a)=>a.__proto__===Map.prototype),G=v((a)=>a.__proto__===Set.prototype),H=v((a)=>{let b=a;if('object'!=typeof a||null===a)return!1;for(;b=Object.getPrototypeOf(b),null!==Object.getPrototypeOf(b););return Object.getPrototypeOf(a)===b}),I=v((a)=>y(a)||A(a)||B(a)||z(a)||D(a)||'symbol'==typeof a),J=v((a)=>y(a)||B(a)&&!a||z(a)&&''===a),K=v((a)=>A(a[0])&&A(a[1])),L=(a,b)=>[a[0]+b[0],a[1]+b[1]],M=(a,b)=>(a[0]+=b[0],a[1]+=b[1],a),N=(a,b)=>[a[0]-b[0],a[1]-b[1]],O=(a,b)=>(a[0]-=b[0],a[1]-=b[1],a),P=(a,b)=>(a[0]*=b,a[1]*=b,a),Q=(a)=>u(a[0])+u(a[1]),R=(a)=>n(Q(a)),S=(a)=>0===a[0]&&0===a[1]?[0,0]:P(a,1/R(a)),T=(a,b)=>P(S(a),b),U=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d+=2)c[d]=a[d]+b[0],c[d+1]=a[d+1]+b[1];return c},V=(a,b)=>{for(let c=0,d=a.length;c<d;c+=2)a[c]+=b[0],a[c+1]+=b[1];return a},W=(a,b)=>{const c=[];for(let d=0,e=a.length;d<e;d+=2)c[d]=a[d]-b[0],c[d+1]=a[d+1]-b[1];return c},X=(a,b)=>{const e=[],f=m(b),g=l(b);for(let c=0,h=a.length;c<h;c+=2)e[c]=d(a[c]*g-a[c+1]*f),e[c+1]=d(a[c]*f+a[c+1]*g);return e},Y=(a,b,c)=>U(X(W(a,b),c),b),Z=(a,b)=>{for(let c=0;c<a.length;c+=2)b([a[c],a[c+1]],c/2,a)},$=()=>Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9),_=v((a)=>'Point'===a.shape),aa=v((a)=>'Circle'===a.shape),ba=v((a)=>'Rectangle'===a.shape),ca=v((a)=>'Polygon'===a.shape),da=(a,b)=>[-a/2,+b/2,-a/2,-b/2,+a/2,-b/2,+a/2,+b/2],ea=(a,b=0,c=1,d=1,e='')=>({id:$(),shape:'Rectangle',label:e,position:a,rotation:b,width:c,height:d,points:da(c,d)});let fa=document.createElement('canvas'),ga=fa.getContext('2d');const ha=(a)=>{fa=a;const b=a.getContext('2d');b&&(ga=b)},ia=[0,0],ja=(a)=>ga.translate(d(a[0],0),d(a[1],0)),ka=(a)=>ga.rotate(a),la=(a,b,c)=>ga.clearRect(d(a[0],0),d(a[1],0),d(b,0),d(c,0)),ma=()=>la(ia,fa.width,fa.height),na=(a)=>ga.moveTo(d(a[0],0),d(a[1],0)),oa=(a)=>ga.lineTo(d(a[0],0),d(a[1],0)),pa=(a,b,c,e,f)=>ga.arc(d(a[0],0),d(a[1],0),b,c,e,f),qa=(a,b,c)=>ga.rect(d(a[0],0),d(a[1],0),d(b,0),d(c,0)),ra=(a,b=0)=>{const c=[a[0],a[1]],d=W(a,c);ga.save(),ja(c),ka(b),na(ia),Z(d,oa),ga.restore()},sa=(a,b,c=0)=>{const d=[b[b.length-2],b[b.length-1]];ga.save(),ja(a),ka(c),na(d),Z(b,oa),ga.restore()},ta=(a,b,c,e=0)=>{ga.save(),ja(a),ka(e),qa([-b/2,-c/2],d(b,0),d(c,0)),ga.restore()},ua=(a,b=100,c=0,d=0,e=2*Math.PI,f=!1)=>{ga.save(),ja(a),ka(c),pa(ia,b,d,e,f),ga.restore()},va=(a)=>(b,...c)=>{ga.save(),ga.beginPath(),ga.fillStyle=b,a(...c),ga.fill(),ga.restore()},wa=(a)=>(b,...c)=>{ga.save(),ga.beginPath(),ga.strokeStyle=b.style||'',ga.lineWidth=b.thickness||1,a(...c),ga.stroke(),ga.restore()},xa=va(sa),ya=va(ta),za=va(ra),Aa=va(ua),Ba=wa(sa),Ca=wa(ta),Da=wa(ra),Ea=wa(ua),Fa=(a,b,c,e=0)=>{if(ga.save(),ga.fillStyle=a.style||'',ga.font=a.font||ga.font,ga.textAlign=a.textAlign||ga.textAlign,ga.textBaseline=a.textBaseline||ga.textBaseline,ka(e),a.horizontalAlign){const{width:a}=ga.measureText(c);ja([-a/2,0])}ga.fillText(c,d(b[0],0),d(b[1],0),a.maxWidth),ga.restore()},Ga=document.querySelector(`canvas`);ha(Ga),ga.imageSmoothingEnabled=!1;const Ha=160,Ia=192;let Ja=Ga.offsetWidth,Ka=Ga.offsetHeight,La=1,Ma=1;Ga.width=Ha,Ga.height=Ia;const Na=()=>{const{top:a,left:b,width:c,height:d}=Ga.getBoundingClientRect();Ja=b,Ka=a,La=Ha/c,Ma=Ia/d};Na(),window.addEventListener(`resize`,Na);const Oa=new AudioContext,Pa=(a)=>new Promise((b)=>setTimeout(b,a)),Qa=Date.now();let Ra=!1;const Sa=82.41,Ta=87.31,Ua=98,Va=110,Wa=130.81,Xa=164.81,Ya=174.61,Za=196,$a=220,_a=246.94,ab=261.63,bb=293.66,cb=329.63,db=349.23,eb=392,fb=440,gb=493.88,hb=523.25,ib=587.33,jb=659.26,kb=783.99,lb=880,mb=987.77,nb=async()=>await g([[[cb,ab],1],[[bb,Za],1],[[ab,$a],1],[[_a,Xa],1],[[$a,Ya],1],[[Za,Wa],1],[[$a,Ya],1],[[_a,Za],1],[[1318.51,kb,hb],1],[[1174.66,mb,eb],1],[[1046.5,fb],1],[[mb,kb,cb],1],[[lb,hb,db],1],[[kb,jb,ab],1],[[lb,698.46,db],1],[[mb,ib,eb],1],[[hb,ab,cb],[0.5,1,1]],[hb,0.5],[[ib,bb,Za],[0.5,1,1]],[gb,0.5],[[hb,cb,fb],[0.5,1,1]],[jb,0.5],[[kb,Xa],[0.5,1,1]],[eb,0.5],[[fb,$a,Ya],[0.5,1,1]],[db,0.5],[[cb,Wa],[0.5,1,1]],[eb,0.5],[[db,$a,Ya],[0.5,1,1]],[hb,0.5],[[gb,_a,Za],[0.5,1,1]],[eb,0.5],[[ab,Xa,Wa],[0.5,1,1]],[cb,0.25],[eb,0.25],[[eb,Ua],[0.25,1,1]],[fb,0.25],[eb,0.25],[db,0.25],[[cb,Va,Wa],[0.75,1,1]],[cb,0.25],[[cb,Ua,Sa],[0.25,1,1]],[db,0.25],[cb,0.25],[bb,0.25],[[ab,Va,Ta],[0.25,1,1]],[233.08,0.25],[$a,0.25],[_a,0.25],[[Za,Sa,65.41],[0.5,1,1]],[Xa,0.5],[[Wa,Va,Ta],[0.5,1,1]],[Ya,0.25],[Xa,0.25],[[146.83,123.47,Ua],[0.5,1,1]],[Za,0.25],[Ya,0.25],[[``,cb,ab],[0.5,1,1]],[hb,0.5],[[ib,Za],[0.5,1,1]],[gb,0.5],[[hb,ab,$a],[0.5,1,1]],[cb,0.5],[[eb,_a,Xa],[0.75,1,1]],[fb,0.25],[[db,$a,Ya],[0.5,1,1]],[ab,0.5],[[cb,Za,Wa],[0.5,1,1]],[eb,0.5],[[db,$a,Ya],[0.5,1,1]],[cb,0.5],[[bb,_a,Za],[0.5,1,1]],[eb,0.5],[[cb,ab,Wa],[2,2,2]]]),ob=()=>{Ra=!0},pb={38:`up`,40:`down`,37:`left`,39:`right`,81:`q`,87:`w`,69:`e`,65:`a`,83:`s`,68:`d`,48:`0`,49:`1`,50:`2`,51:`3`,52:`4`,53:`5`,54:`6`,55:`7`,56:`8`,57:`9`,189:`-`,187:`=`,32:`space`,13:`return`,16:`shift`,17:`ctrl`,9:`tab`,18:`alt`},qb={up:0,down:0,left:0,right:0,q:0,w:0,e:0,a:0,s:0,d:0,0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,"-":0,"=":0,space:0,return:0,shift:0,ctrl:0,tab:0,alt:0,mousePosition:null,click:null},rb=(a,b=1)=>{const c=pb[a];return c&&(qb[c]=b),qb[c]};document.body.onkeyup=({keyCode:a})=>rb(a,0),document.body.onkeydown=({keyCode:a})=>rb(a,1);const sb=()=>{const a=Object.keys(qb);for(let b=-1;++b<a.length;)qb[a[b]]=1===qb[a[b]]?2:qb[a[b]]};document.body.onmousedown=()=>qb.click=1,document.body.onmouseup=()=>qb.click=0;const tb=({clientX:a,clientY:b,touches:c})=>c?[c[0].clientX,c[0].clientY]:[a,b];document.body.onmousemove=(a)=>{const b=O(tb(a),[Ja,Ka]);b[0]*=La,b[1]*=Ma,qb.mousePosition=b};const ub=`#fff`,vb=`#00f`,wb=`Arial Black, Gadget, sans-serif`,xb=`"Lucida Console", Monaco, monospace`,yb=12,zb=1.1*yb,Ab=`24px ${wb}`,Bb=`${yb}px ${xb}`,Cb=2,Db={style:ub,thickness:Cb},Eb=[0,-Cb/2],Fb=(a,b,c,d=0)=>{ya(vb,L(a,Eb),b,c*zb+d),Ca(Db,L(a,Eb),b,c*zb+d)},Gb=`\uD83D\uDC69\uD83C\uDFFC\u200D\uD83C\uDF3E`,Hb=`\uD83D\uDC6E\uD83C\uDFFF\u200D`,Ib=`\uD83D\uDD75\uD83C\uDFFD`,Jb=`\uD83D\uDC69\uD83C\uDFFB\u200D\uD83C\uDFA4`,Kb=`\uD83C\uDF32`,Lb=`\uD83C\uDF33`,Mb=`\u2601\uFE0F`,Nb=`\uD83C\uDFD4`,Ob=`\uD83D\uDC7B`,Pb=`\uD83C\uDF75`,Qb=`\uD83D\uDC8E`,Rb={dialog:[[`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam accumsan eu metus et porta. Ut rutrum aliquam velit, et euismod lorem maximus non. Etiam non magna sit amet velit molestie tempor vel lacinia est. Aenean convallis placerat ante ultricies venenatis. Maecenas erat tellus, bibendum in enim id, porta consectetur purus. Curabitur rhoncus pulvinar volutpat. Vestibulum condimentum sem sed sollicitudin elementum. Nunc eget est eleifend, feugiat arcu ut, tincidunt lectus. Proin interdum augue in neque aliquet sollicitudin. Mauris posuere eget elit eu fermentum. Mauris viverra, ante ac pretium tincidunt, nunc felis egestas enim, nec placerat libero justo eu felis. Nulla ipsum mi, condimentum mattis nibh sed, scelerisque pharetra magna. Donec laoreet et lectus ut congue. Donec vulputate ac nulla nec facilisis.`,[Jb,`ya mum`]]],position:[0,0],target:null,logic:null};let Sb=0,Tb=0;const t=[0,0];class Ub{constructor(){this.apply=(a)=>Object.assign(Object.create(null),a,{position:[...this.position],rotation:this.rotation}),this.position=t,this.rotation=0,this.saved_positions=[],this.saved_rotations=[]}save(){this.saved_positions.push([this.position[0],this.position[1]]),this.saved_rotations.push(this.rotation)}restore(){if(0<this.saved_positions.length){const a=this.saved_positions.pop();K(a)&&(this.position[0]=a[0],this.position[1]=a[1]);const b=this.saved_rotations.pop();A(b)&&(this.rotation=b)}}}const Vb=(a,b)=>s((b[2]-b[0])*(a[1]-b[1])-(b[3]-b[1])*(a[0]-b[0])),Wb=(a,b,c)=>Q(N(a,b))<=u(c),Xb=(a,b,c,d)=>j(a[0]-b[0])<=c/2&&j(a[1]-b[1])<=d/2,Yb=(a,b)=>{for(let c=0,d=b.length,e=0,f=0;;){if(e=c==d-2?0:c+2,f=Vb(a,[b[c],b[c+1],b[e],b[e+1]]),-1===f)return!1;if(c+=2,c>d-2)break}return!0},Zb=(a,b,c,d,e)=>Xb(a,c,d,e)||Wb(c,a,b)||u(a[0]-h(c[0],k(a[0],c[0]+d)))+u(a[1]-h(c[1],k(a[1],c[1]+e)))<u(b),$b=(a,b,c,d,e,f)=>!(j(d[0]-a[0])>b/2+e/2||j(d[1]-a[1])>c/2+f/2),_b=(a,b,c,d)=>{if(Yb(a,d)||Yb(c,b))return!0;const e=h(b.length,d.length);for(let f=0;f<e;f+=2)if(f<b.length&&Yb([b[f],b[f+1]],d)||f<d.length&&Yb([d[f],d[f+1]],b))return!0;return!1},ac=new Map,bc=new Map,cc=new Map;let dc=ea([0,0],0,window.innerWidth,window.innerHeight,'window');window.onresize=()=>Object.assign(dc,ea([0,0],0,window.innerWidth,window.innerHeight,'window'));const ec=((a=dc)=>(b)=>{const{geometry:c={shape:null}}=b;switch(c.shape){case'Circle':return Zb(c.position,c.radius,a.position,a.width,a.height);case'Rectangle':return $b(c.position,c.width,c.height,a.position,a.width,a.height);case'Polygon':return _b(c.position,V(Y(c.points,[0,0],c.rotation),c.position),a.position,V(Y(a.points,[0,0],a.rotation),a.position));default:return!0;}})(dc),fc=(b)=>(c)=>{const{geometry:d,children:f,render:g,interact:h}=c;ga.save(),b.save(),!d||(ja(d.position),M(b.position,e(d.position,b.rotation)),ka(d.rotation),b.rotation+=d.rotation),ga.save(),g&&(!d||ec(b.apply(d)))&&g(c),ga.restore(),f&&a(f,fc(b)),h&&(h.onMouseDown?ac.set(c,[c,d&&b.apply(d),h.onMouseDown]):ac.delete(c),h.onMouseMove?bc.set(c,[c,d&&b.apply(d),h.onMouseMove]):bc.delete(c),h.onMouseUp?cc.set(c,[c,d&&b.apply(d),h.onMouseUp]):cc.delete(c)),ga.restore(),b.restore()},gc='ontouchstart'in window,hc=(a)=>v((a)=>!!a.clientX)(a)?[a.clientX,a.clientY]:[a.touches[0].clientX,a.touches[0].clientY],ic=(a)=>(b)=>{switch(b.shape){case'Circle':return Wb(a,b.position,b.radius);case'Rectangle':return Xb(a,b.position,b.width,b.height);case'Polygon':return Yb(a,V(Y(b.points,[0,0],b.rotation),b.position));default:return!1;}};let jc=0,kc=0,lc=1,mc=1;const nc=()=>{const{top:a,left:b,width:c,height:d}=fa.getBoundingClientRect();jc=b,kc=a,lc=window.innerWidth/c,mc=window.innerHeight/d};nc(),window.addEventListener('resize',nc);const oc=(b)=>(c)=>{if(!!b.size){const d=O(hc(c),[jc,kc]);d[0]*=lc,d[1]*=mc;const e=ic(d);a(p([...b.values()],([a,b])=>e(b)),([a,b,c])=>c(a,d))}},pc=[],qc=()=>{for(;pc.length;)pc.pop()},rc=((a,b)=>(ha(a),a.addEventListener(gc?'ontouchstart':'mousedown',oc(ac)),a.addEventListener(gc?'ontouchmove':'mousedown',oc(bc)),a.addEventListener(gc?'ontouchend':'mousedown',oc(cc)),()=>fc(new Ub)(b)))(Ga,{geometry:ea([Ga.width/2,Ga.height/2],0,Ga.width,Ga.height),children:pc,render({geometry:a}){a.position[0]=Ga.width/2,a.position[1]=Ga.height/2,a.width=Ga.width,a.height=Ga.height,a.points=da(a.width,a.height)}});let sc;const tc=(a)=>{qc(),a.init(),sc&&sc.dismiss(),sc=a};let uc=null;const vc=Ha-Cb,wc=5*zb,xc=vc-4*Cb,yc=wc-4*Cb,zc=(a,b,c)=>{const d=[];b=b.toUpperCase(),a.textBaseline=`top`,a.font=`${yb}px monospace`;const e=b.split(` `);let f=``,g=0,h=0;for(const[i,j]of e.entries()){const b=`${f+j} `,e=a.measureText(b),k=e.width;if(h+b.length>c)return k>xc?(d.push([-xc/2,-yc/2+g,f]),h+=f.length,d.push([-xc/2,-yc/2+g+zb,j.substr(0,c-h)])):d.push([-xc/2,-yc/2+g,b.substr(0,c-h)]),d;k>xc&&0<i?(d.push([-xc/2,-yc/2+g,f]),h+=f.length,f=`${j} `,g+=zb):f=b}return d.push([-xc/2,-yc/2+g,f]),d},Ac={geometry:ea([0,Ia/2-wc/2],0,vc,wc),render:({geometry:a})=>{const{dialog:b}=Rb,[c]=b;if(!c)return;uc||(uc=Date.now());const d=Math.floor((Date.now()-uc)/50);Fb([0,0],a.width,0,a.height);const[e,f]=c,g=zc(ga,e,d);let h=0;if(f){const[a,b]=f,{width:c}=ga.measureText(b),d=c+16+4*Cb,e=-vc/2+c,g=-wc/2-2*Cb;Fb([e,g],d,1,4*Cb),ga.font=`${yb}px monospace`,Fa({style:ub},[e-6+4*Cb-d/2,g-zb/2],a),Fa({style:ub},[e-6+4*Cb-d/2+16,g-zb/2],b),h=0.33*zb}g.forEach(([a,b,c])=>{Fa({style:ub},[a,b+h],c)}),1===qb.space&&(Rb.dialog.shift(),uc=null)},interact:{onMouseDown:()=>{Rb.dialog.shift(),uc=null}}},Bc=[0,80,140],Cc=((a)=>([b,c])=>{const[d,e,f]=a;return[b+c*(d-b)/(c+e)-d+Ha/2,Ia-(0===e+c?0:f*c/(e+c)),n(o(e+c,2)+o(d-b,2))]})(Bc),Dc=((a)=>([b,c])=>{const[d,e,f]=a,g=e/(-f/(c-Ia)-1);return[-(-2*d*e+Ha*g+Ha*e+-2*b*g+-2*b*e)/(2*e),g]})(Bc),Ec=[],Fc=((a,b)=>{for(let c=0;c<a.length;c+=2)a.splice(c,2,...b([a[c],a[c+1]],c/2));return a})(V(da(1e4,1600),[0,800]),(a)=>c(Cc(a),2)),Gc=ga.createLinearGradient(0,0,200,200);Gc.addColorStop(0,`#5E8C6A`),Gc.addColorStop(1,`#BFB35A`);const Hc=ga.createLinearGradient(0,0,200,200);Hc.addColorStop(0,`#69D2E7`),Hc.addColorStop(1,`#A7DBD8`);const Ic=()=>{ya(Hc,[0,0],2*Ha,Ia,0),xa(Gc,[0,0],Fc),Ec.map((a)=>[...Cc(a),a[2],a[3],a[4]]).sort((c,a)=>a[2]-c[2]).forEach(([a,b,c,d,e])=>Fa({},[a,b-d],e))},Jc=(a)=>([b,c],d=0)=>[b,c,d,a],Kc=Jc(Kb),Lc=Jc(Lb),Mc=Jc(Gb),Nc=Jc(Hb),Oc=Jc(Ib),Pc=Jc(Jb),Qc=Jc(Mb),Rc=Jc(Nb),Sc=Jc(Ob),Tc=Jc(Pb),Uc=Jc(Qb),Vc=[0,0],Wc=3;let Xc=1e3;for(;0<--Xc;)Ec.push((0.5<Math.random()?Kc:Lc)([5120*Math.random()-2560,1280*Math.random()],0));for(Xc=25;0<--Xc;)Ec.push(Qc([1e4*Math.random()-5e3,1e3*Math.random()+3500],30*Math.random()+10));for(Xc=5;0<--Xc;)Ec.push(Tc([5120*Math.random()-2560,1280*Math.random()],0));const i=Pc([20*Math.random()-10,20*Math.random()-10],0),Yc=Mc([20*Math.random()-10,20*Math.random()-10],0),Zc=Nc([20*Math.random()-10,20*Math.random()-10],0),$c=Oc([20*Math.random()-10,20*Math.random()-10],0),_c=Uc([20*Math.random()-10,20*Math.random()-10],0),ad=()=>(a,b)=>{const c=N(Rb.position,a);R(c)>b&&M(a,T(c,Wc))};Ec.push(i,Yc,Zc,$c,_c);var bd=()=>{if(Vc[0]=0,Vc[1]=0,(qb.w||qb.up||qb.s||qb.down||qb.d||qb.right||qb.a||qb.left)&&(Rb.target=null),(qb.w||qb.up)&&(Vc[1]+=1),(qb.s||qb.down)&&(Vc[1]-=1),(qb.d||qb.right)&&(Vc[0]+=1),(qb.a||qb.left)&&(Vc[0]-=1),M(Rb.position,T(Vc,Wc)),null!==Rb.target){const a=N(Rb.target,Rb.position);3>Q(a)&&(Rb.target=null),M(Rb.position,T(a,Wc))}Rb.position[1]=h(Rb.position[1],5),i[0]=Rb.position[0],i[1]=Rb.position[1];const a=ad(i);a(Yc,20+Date.now()%300/30),a(Zc,45+Date.now()%300/30),a($c,70+Date.now()%300/30),a(_c,90+Date.now()%300/30);const b=Rb.position[0]-Bc[0];j(b)>0.2*Ha&&(Bc[0]+=b-0.2*(s(b)*Ha))},cd={init:()=>{pc.push(Ac),Rb.logic=(a)=>{bd(a),Ic(a),qb.click&&(Rb.target=Dc(qb.mousePosition))}},dismiss:()=>{}};let dd=null,ed=0,fd=0,gd=!1;const hd={textBaseline:`middle`,style:`white`,font:Ab},id={geometry:ea([0,0],0,Ga.width,Ga.height),render:()=>{if(dd||(dd=Date.now(),nb()),fd=Date.now()-dd,ed=k(fd/24000,1),Fa(hd,[1<fd/24000?-11:10*(j((fd-1500)%6e3/600-5)-2.5)-11,Ga.height-1.125*(k(fd/24000,1)*Ga.height)],Qb),Fa(hd,[-59,-Ga.height/2+k(2*ed,1)*Ga.height/2],`A L T E R`),24500<fd){ga.font=Bb;const{width:a}=ga.measureText(`new game`);Fa({style:`white`,font:Bb},[-a/2-2,48],`new game`),400<Date.now()%600&&xa(`white`,[-42,44],[-5,3,5,0,-5,-3])}!gd&&(qb.space||qb.return)&&1>ed?dd/=2:!gd&&(qb.space||qb.return)&&tc(cd),gd=qb.space||qb.return},interact:{onMouseDown(){1>ed?dd/=2:tc(cd)}}};tc({init:()=>{dd=null,pc.push(id),Rb.logic=null},dismiss:()=>ob()}),((a)=>{let b=!0;return requestAnimationFrame(function c(){Sb=k(16,Date.now()-Tb),b&&a(Sb),Tb=Date.now(),requestAnimationFrame(c)}),()=>b=!b})((a)=>{ma(),Rb.logic&&Rb.logic(),rc(a),sb()})})();